<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Game</title>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Group Project">

        <script type="text/javascript" src="js/base.js"></script>
        <script type="text/javascript" src="js/castle.js"></script>
        <script type="text/javascript" src="js/player.js"></script>
        <script type="text/javascript" src="js/enemies.js"></script>
        <script type="text/javascript" src="js/creatureSpawner.js"></script>

        <link rel="stylesheet" type="text/css" href="canvasStyle.css">

        <link rel="stylesheet" type="text/css" href="TMHolenStyle.css">
    </head>

    <body>

        <nav>

            <ul>
                <li><a href="index.html">Game</a></li>
                <li><a href="howToPlay.html">How to Play</a></li>
                <li><a href="javascriptFun.html">JavaScript Fun</a></li>
                <li><a href="development.html">The Development</a></li>
                <li><a href="about.html">About Us</a></li>

            </ul>

        </nav>

        <aside>    
            <h3>Advertisement:</h3>
        </aside>

        <div id="headerAndMainContainer">
            <header>
                <div class="container"><a href="index.html"><img src="" alt="Team4 Logo" id="logo"></a></div>
            </header>

            <main>    
                <div class="center">

                    <h1 class="noMarginLeft">Welcome to our game!</h1>
                    <p>If you need help check out the "How to Play" page.<br>Remember to check out the other pages too, they are interesting!</p>


                </div>

                <div id="gameSplash" style="width: 900px;height:500px;">
                    <a href="#" id="startGame">Click to start</a>
                </div>
                <div id="gameOver" style="width: 900px;height:500px;">
                    <p>Your score was: <span id="gameScore">43</span</p>
                </div>
                <canvas  id="gameWorld" width="900" height="500"></canvas>
                <script>
                    var game = new MainGame("gameWorld");
                    game.addGameObject(new Castle(game));
                    var rightAttack = new RightAttack();
                    var leftAttack = new LeftAttack();
                    // The attacks must be added before the player 
                    // for the collision detection to work correctly
                    // or else the enemies can be killed after the player
                    // is stunned.
                    game.addGameObject(rightAttack);
                    game.addGameObject(leftAttack);
                    game.addGameObject(new Player(leftAttack, rightAttack));
                    game.addGameObject(new Enemy1(10, 7));
                    game.addGameObject(new Enemy1(100, -7));
                    game.addGameObject(new Enemy2(900, -4));
                    var spawner = new Spawner(game);
                    game.setEnemySpawner(spawner);
                    // game.start();

                    var splash = document.getElementById("gameSplash");
                    var startButton = document.getElementById("startGame");
                    var gameCanvas = document.getElementById("gameWorld");
                    var gameOver = document.getElementById("gameOver");
                    var gameScore = document.getElementById("gameScore");

                    startButton.addEventListener("click", function(e){
                        e.preventDefault();
                        splash.style.display = "none";
                        gameCanvas.style.display = "block";
                        game.start();

                    })

                    game.registerGameOverCallback(function(){

                        gameScore.innerText = game.getScore();
                        gameCanvas.style.display = "none";
                        gameOver.style.display = "block";

                    })
                </script>

            </main>

        </div>

        <aside id="Right">
            <h3>Advertisment:</h3>
        </aside>

        <footer>
            <div id="footerContainer">
                <small><i>Team4 &copy; 2015 - <a href="">TMHolen@tmholen.com</a></i></small>
            </div>
        </footer>  

    </body>
</html>
